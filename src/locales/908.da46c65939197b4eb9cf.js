"use strict";(self.webpackChunkreact_advanced=self.webpackChunkreact_advanced||[]).push([[908],{3006:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Y});var a=r(2241),n=r(7294),i=r(4478),s=r(3007),c=r(5550),o=r(1715),l=r(6628).p.injectEndpoints({endpoints:function(e){return{getArticleRecommendationsList:e.query({query:function(e){return{url:"/articles",params:{_limit:e}}}})}},overrideExisting:!1}).useGetArticleRecommendationsListQuery,u=r(5893),d=(0,n.memo)((function(e){var t=e.className,r=(0,i.$)().t,n=l(3),d=n.data,m=n.isLoading,x=n.error;return m||x||!d?null:(0,u.jsxs)(c.g,{gap:"8",className:(0,s.A)("",{},[t]),children:[(0,u.jsx)(o.xv,{size:o.yH.L,title:r("recommend")}),(0,u.jsx)(a.wD,{articles:d,target:"_blank",virtualized:!1})]})})),m=r(9250),x=r(1233),f=r(8979),g=r(5693),p=r(2949),v=r(3312),h=r(6897);const j={CommentCard:"xIHByGcu",header:"dsH_3Oqu",username:"dw82WMzO",loading:"V0iZ1Un3"};var C=(0,n.memo)((function(e){var t=e.comment,r=e.isLoading,a=e.className;return(0,i.$)().t,r?(0,u.jsxs)(c.g,{max:!0,gap:"8",className:(0,s.A)(j.CommentCard,{},[a,j.loading]),children:[(0,u.jsxs)("div",{className:j.header,children:[(0,u.jsx)(v.O,{width:30,height:30,border:"50%"}),(0,u.jsx)(v.O,{height:16,width:100,className:j.username})]}),(0,u.jsx)(v.O,{className:j.text,width:"100%",height:50})]}):t?(0,u.jsxs)(c.g,{max:!0,gap:"8",className:(0,s.A)(j.CommentCard,{},[a]),children:[(0,u.jsxs)(h.F,{to:"".concat(g.h3.profile).concat(t.user.id),className:j.header,children:[t.user.avatar?(0,u.jsx)(p.q,{size:30,src:t.user.avatar}):null,(0,u.jsx)(o.xv,{className:j.username,title:t.user.username})]}),(0,u.jsx)(o.xv,{className:j.text,text:t.text})]}):null})),b=(0,n.memo)((function(e){var t=e.className,r=e.comments,a=e.isLoading,n=(0,i.$)().t;return a?(0,u.jsxs)(c.g,{max:!0,gap:"16",className:(0,s.A)("",{},[t]),children:[(0,u.jsx)(C,{isLoading:!0}),(0,u.jsx)(C,{isLoading:!0}),(0,u.jsx)(C,{isLoading:!0})]}):(0,u.jsx)(c.g,{max:!0,gap:"16",className:(0,s.A)("",{},[t]),children:null!=r&&r.length?r.map((function(e){return(0,u.jsx)(C,{isLoading:a,comment:e},e.id)})):(0,u.jsx)(o.xv,{text:n("no-comments")})})})),w=(0,n.lazy)((function(){return r.e(77).then(r.bind(r,8077))})),L=r(3942),k=r(5401),N=r(9970),A=r(379),y=r(4268),S=r(5861),D=r(4687),I=r.n(D),z=(0,y.hg)("articleDetails/fetchCommentsByArticleId",function(){var e=(0,S.Z)(I().mark((function e(t,r){var a,n,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.extra,n=r.rejectWithValue,t){e.next=3;break}return e.abrupt("return",n("error"));case 3:return e.prev=3,e.next=6,a.api.get("/comments",{params:{articleId:t,_expand:"user"}});case 6:if((i=e.sent).data){e.next=9;break}throw new Error;case 9:return e.abrupt("return",i.data);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",n("error"));case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,r){return e.apply(this,arguments)}}()),q=(0,y.HF)({selectId:function(e){return e.id}}),P=q.getSelectors((function(e){var t;return(null===(t=e.articleDetailsPage)||void 0===t?void 0:t.comments)||q.getInitialState()})),_=(0,y.oM)({name:"articleDetailsCommentsSlice",initialState:q.getInitialState({isLoading:!1,ids:["1","2"],entities:{1:{id:"1",text:"comment 1",user:{id:"1",username:"1"}},2:{id:"2",text:"comment 2",user:{id:"2",username:"2"}}},error:void 0}),reducers:{},extraReducers:function(e){e.addCase(z.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(z.fulfilled,(function(e,t){e.isLoading=!1,q.setAll(e,t.payload)})).addCase(z.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload}))}}).reducer,E=r(3918),H=r(7081),O=(0,y.hg)("articleDetails/addCommentForArticle",function(){var e=(0,S.Z)(I().mark((function e(t,r){var a,n,i,s,c,o,l;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.extra,n=r.dispatch,i=r.rejectWithValue,s=r.getState,c=(0,H.m5)(s()),o=(0,E.wq)(s()),c&&t&&o){e.next=5;break}return e.abrupt("return",i("no data"));case 5:return e.prev=5,e.next=8,a.api.post("/comments",{text:t,articleId:o.id,userId:c.id});case 8:if((l=e.sent).data){e.next=11;break}throw new Error;case 11:return n(z(o.id)),e.abrupt("return",l.data);case 15:return e.prev=15,e.t0=e.catch(5),e.abrupt("return",i("error"));case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t,r){return e.apply(this,arguments)}}()),$=function(e){var t,r;return null===(t=e.articleDetailsPage)||void 0===t||null===(r=t.comments)||void 0===r?void 0:r.isLoading},R=(0,n.memo)((function(e){var t=e.className,r=e.id,a=(0,i.$)().t,l=(0,k.T)(),d=(0,L.v9)(P.selectAll),m=(0,L.v9)($),x=(0,n.useCallback)((function(e){l(O(e))}),[l]);return(0,N.Q)((function(){l(z(r))})),(0,u.jsxs)(c.g,{max:!0,gap:"16",className:(0,s.A)("",{},[t]),children:[(0,u.jsx)(o.xv,{size:o.yH.L,title:a("comments")}),(0,u.jsx)(n.Suspense,{fallback:(0,u.jsx)(A.a,{}),children:(0,u.jsx)(w,{onSendComment:x})}),(0,u.jsx)(b,{isLoading:m,comments:d})]})})),U=r(7779),W=(0,y.hg)("articleDetailsPage/fetchArticleRecommendations",function(){var e=(0,S.Z)(I().mark((function e(t,r){var a,n,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.extra,n=r.rejectWithValue,e.prev=1,e.next=4,a.api.get("/articles",{params:{_limit:4}});case 4:if((i=e.sent).data){e.next=7;break}throw new Error;case 7:return e.abrupt("return",i.data);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",n("error"));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}()),F=(0,y.HF)({selectId:function(e){return e.id}}),V=(F.getSelectors((function(e){var t;return(null===(t=e.articleDetailsPage)||void 0===t?void 0:t.recommendations)||F.getInitialState()})),(0,y.oM)({name:"articleDetailsCommentsSlice",initialState:F.getInitialState({isLoading:!1,ids:[],entities:{}}),reducers:{},extraReducers:function(e){e.addCase(W.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(W.fulfilled,(function(e,t){e.isLoading=!1,F.setAll(e,t.payload)})).addCase(W.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload}))}}).reducer),Z=(0,U.UY)({recommendations:V,comments:_}),G=r(5255),M=(0,r(2222).P1)(a.wq,H.m5,(function(e,t){return!(!e||!t)&&e.user.id===t.id})),Q=(0,n.memo)((function(e){var t=e.className,r=(0,i.$)().t,a=(0,m.s0)(),o=((0,L.v9)(H.m5),(0,L.v9)(E.wq)),l=(0,L.v9)(M),d=(0,n.useCallback)((function(){a(g.h3.articles)}),[a]),x=(0,n.useCallback)((function(){a("".concat(g.h3.articles,"/").concat(null==o?void 0:o.id,"/edit"))}),[null==o?void 0:o.id,a]);return(0,u.jsxs)(c.U,{max:!0,justify:"between",className:(0,s.A)("",{},[t]),children:[(0,u.jsx)(G.zx,{onClick:d,children:r("back-to-articles")}),l&&(0,u.jsx)(G.zx,{onClick:x,children:r("edit")})]})}));const T={commentTitle:"foyEsCeG",recommendations:"NwQlSikL"};var B={articleDetailsPage:Z};const Y=(0,n.memo)((function(e){var t=e.className,r=((0,i.$)("article-details").t,(0,m.UO)().id);return(0,u.jsx)(x.W,{reducers:B,removeAfterUnmount:!0,children:(0,u.jsx)(f.T,{className:(0,s.A)(T.ArticleDetailsPage,{},[t]),children:(0,u.jsxs)(c.g,{gap:"16",max:!0,children:[(0,u.jsx)(Q,{}),(0,u.jsx)(a.D0,{id:r}),(0,u.jsx)(d,{}),(0,u.jsx)(R,{id:r})]})})})}))}}]);