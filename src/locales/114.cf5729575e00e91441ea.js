"use strict";(self.webpackChunkreact_advanced=self.webpackChunkreact_advanced||[]).push([[114],{2114:(e,n,r)=>{r.r(n),r.d(n,{default:()=>H});var a,t=r(5893);!function(e){e.INCORRECT_USER_DATA="INCORRECT_USER_DATA",e.INCORRECT_AGE="INCORRECT_AGE",e.INCORRECT_COUNTRY="INCORRECT_COUNTRY",e.NO_DATA="NO_DATA",e.SERVER_ERROR="SERVER_ERROR"}(a||(a={}));var o,l=r(7168),i=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.form},c=(0,l.hg)("profile/updateProfileData",(function(e,n){return t=function(){var e,r,t,o,l,c,u;return function(e,n){var r,a,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(r=1,a&&(t=2&i[0]?a.return:i[0]?a.throw||((t=a.return)&&t.call(a),0):a.next)&&!(t=t.call(a,i[1])).done)return t;switch(a=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],a=0}finally{r=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(s){switch(s.label){case 0:if(e=n.extra,r=n.rejectWithValue,t=n.getState,o=i(t()),(l=function(e){if(!e)return[a.NO_DATA];var n=e.first,r=e.lastname,t=e.age,o=e.country,l=[];return n&&r||l.push(a.INCORRECT_USER_DATA),t&&Number.isInteger(t)||l.push(a.INCORRECT_AGE),o||l.push(a.INCORRECT_COUNTRY),l}(o)).length)return[2,r(l)];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.api.put("/profile/".concat(null==o?void 0:o.id),o)];case 2:if(!(c=s.sent()).data)throw new Error;return[2,c.data];case 3:return u=s.sent(),console.log("e",u),[2,r([a.SERVER_ERROR])];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,n){function a(e){try{l(t.next(e))}catch(e){n(e)}}function o(e){try{l(t.throw(e))}catch(e){n(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((t=t.apply(void 0,[])).next())}));var r,t})),u=(0,l.hg)("profile/fetchProfileData",(function(e,n){return a=function(){var r,a,t,o;return function(e,n){var r,a,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(r=1,a&&(t=2&i[0]?a.return:i[0]?a.throw||((t=a.return)&&t.call(a),0):a.next)&&!(t=t.call(a,i[1])).done)return t;switch(a=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],a=0}finally{r=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(l){switch(l.label){case 0:r=n.extra,a=n.rejectWithValue,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,r.api.get("/profile/".concat(e))];case 2:if(!(t=l.sent()).data)throw new Error;return[2,t.data];case 3:return o=l.sent(),console.log("e",o),[2,a("error")];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,n){function t(e){try{l(a.next(e))}catch(e){n(e)}}function o(e){try{l(a.throw(e))}catch(e){n(e)}}function l(n){var a;n.done?e(n.value):(a=n.value,a instanceof r?a:new r((function(e){e(a)}))).then(t,o)}l((a=a.apply(void 0,[])).next())}));var r,a})),s=function(){return s=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++)for(var t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},s.apply(this,arguments)},f=(0,l.oM)({name:"profile",initialState:{readonly:!0,isLoading:!1,error:void 0,data:void 0},reducers:{setReadonly:function(e,n){e.readonly=n.payload},cancelEdit:function(e){e.readonly=!0,e.validateErrors=void 0,e.form=e.data},updateProfile:function(e,n){e.form=s(s({},e.form),n.payload)}},extraReducers:function(e){e.addCase(u.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(u.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload})).addCase(u.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload})).addCase(c.pending,(function(e){e.validateErrors=void 0,e.isLoading=!0})).addCase(c.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload,e.readonly=!0,e.validateErrors=void 0})).addCase(c.rejected,(function(e,n){e.isLoading=!1,e.validateErrors=n.payload}))}}),d=f.actions,v=f.reducer;!function(e){e.USA="USA",e.EUROPE="Europe"}(o||(o={}));var p,h=r(7294),y=r(4478),g=r(7808),m=[{value:o.USA,content:o.USA},{value:o.EUROPE,content:o.EUROPE}],C=(0,h.memo)((function(e){var n=e.value,r=e.onChange,a=e.readonly,o=(e.className,(0,y.$)().t),l=(0,h.useCallback)((function(e){null==r||r(e)}),[r]);return(0,t.jsx)(g.P,{options:m,value:n,label:o("select-country"),onChange:l,readonly:a})}));!function(e){e.USD="usd",e.EUR="eur",e.POUND="pound"}(p||(p={}));var b=[{value:p.USD,content:p.USD},{value:p.EUR,content:p.EUR},{value:p.POUND,content:p.POUND}],R=(0,h.memo)((function(e){var n=e.value,r=e.onChange,a=e.readonly,o=(e.className,(0,y.$)().t),l=(0,h.useCallback)((function(e){null==r||r(e)}),[r]);return(0,t.jsx)(g.P,{options:b,value:n,label:o("select-currency"),onChange:l,readonly:a})})),j=r(4611),x=r(71),O=r(6925),E=r(4002),N=r(1905),w=r(4809);const P={ProfileCard:"wW9jgKKD",loading:"t07ZxFGs",error:"i5YK3SSb",editing:"DjTe7269"};var T=function(){return T=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++)for(var t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},T.apply(this,arguments)},A=function(e){var n,r,a=e.className,o=e.data,l=e.isLoading,i=e.error,c=e.readonly,u=e.onChangeFirstname,s=e.onChangeLastname,f=e.onChangeCity,d=e.onChangeAge,v=e.onChangeUsername,p=e.onChangeAvatar,h=e.onChangeCurrency,g=e.onChangeCountry,m=(0,y.$)().t;if(l)return(0,t.jsx)(N.U,T({justify:"center",className:(0,j.A)(P.ProfileCard,(n={},n[P.loading]=!0,n),[a])},{children:(0,t.jsx)(E.a,{})}));if(i)return(0,t.jsx)(N.U,T({justify:"center",className:(0,j.A)(P.ProfileCard,{},[a,P.error])},{children:(0,t.jsx)(w.xv,{theme:w.lg.ERROR,title:m("error-while-profile-loading"),text:m("please-reload-the-page"),align:w.PH.CENTER})}));var b=((r={})[P.editing]=!c,r);return(0,t.jsxs)(N.g,T({gap:"8",max:!0,className:(0,j.A)(P.ProfileCard,b,[a])},{children:[(null==o?void 0:o.avatar)&&(0,t.jsx)(N.U,T({justify:"center",max:!0,className:P.avatarWrapper},{children:(0,t.jsx)(x.q,{src:null==o?void 0:o.avatar})})),(0,t.jsx)(O.I,{value:null==o?void 0:o.first,placeholder:m("name"),className:P.input,onChange:u,readonly:c}),(0,t.jsx)(O.I,{value:null==o?void 0:o.lastname,placeholder:m("lastname"),className:P.input,onChange:s,readonly:c}),(0,t.jsx)(O.I,{type:"number",value:null==o?void 0:o.age,placeholder:m("age"),className:P.input,onChange:d,readonly:c}),(0,t.jsx)(O.I,{value:null==o?void 0:o.city,placeholder:m("city"),className:P.input,onChange:f,readonly:c}),(0,t.jsx)(O.I,{value:null==o?void 0:o.username,placeholder:m("username"),className:P.input,onChange:v,readonly:c}),(0,t.jsx)(O.I,{value:null==o?void 0:o.avatar,placeholder:m("avatar"),className:P.input,onChange:p,readonly:c}),(0,t.jsx)(R,{className:P.input,value:null==o?void 0:o.currency,onChange:h,readonly:c}),(0,t.jsx)(C,{className:P.input,value:null==o?void 0:o.country,onChange:g,readonly:c})]}))},U=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.data},S=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.error},k=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.isLoading},I=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.readonly},_=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.validateErrors},D=r(9704),L=r(9250),G=r(1150),F=r(5461),M=r(2276),V=r(4882),Q=r(314),W=r(3574),Y=r(9161),z=r(2636),K=function(){return K=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++)for(var t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},K.apply(this,arguments)},q=function(e){var n=e.className,r=(0,F.T)(),a=(0,y.$)().t,o=(0,D.v9)(W.m5),l=(0,D.v9)(U),i=(null==o?void 0:o.id)===(null==l?void 0:l.id),u=(0,D.v9)(I);console.log("authData",o);var s=(0,h.useCallback)((function(){r(d.setReadonly(!1))}),[r]),f=(0,h.useCallback)((function(){r(d.cancelEdit())}),[r]),v=(0,h.useCallback)((function(){r(c())}),[r]);return(0,t.jsxs)(z.U,K({max:!0,justify:"between",className:(0,j.A)("",{},[n])},{children:[(0,t.jsx)(w.xv,{title:a("Profile")}),i&&(0,t.jsx)("div",{children:u?(0,t.jsx)(Y.zx,K({theme:Y.bn.OUTLINE,onClick:s},{children:a("Edit")})):(0,t.jsxs)(z.U,K({gap:"8"},{children:[(0,t.jsx)(Y.zx,K({theme:Y.bn.OUTLINE_RED,onClick:f},{children:a("Cancel")})),(0,t.jsx)(Y.zx,K({theme:Y.bn.OUTLINE,onClick:v},{children:a("Save")}))]}))})]}))},$=function(){return $=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++)for(var t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},$.apply(this,arguments)},B={profile:v};const H=function(e){var n,r=e.className,o=(0,y.$)("profile").t,l=(0,F.T)(),c=(0,D.v9)(i),s=(0,D.v9)(k),f=(0,D.v9)(S),v=(0,D.v9)(I),p=(0,D.v9)(_),g=(0,L.UO)().id,m=((n={})[a.SERVER_ERROR]=o("server-error"),n[a.NO_DATA]=o("no-data"),n[a.INCORRECT_USER_DATA]=o("incorrect-user-data"),n[a.INCORRECT_COUNTRY]=o("incorrect-country"),n[a.INCORRECT_AGE]=o("incorrect-age"),n);(0,M.Q)((function(){g&&l(u(g))}));var C=(0,h.useCallback)((function(e){l(d.updateProfile({first:e||""}))}),[l]),b=(0,h.useCallback)((function(e){l(d.updateProfile({lastname:e||""}))}),[l]),R=(0,h.useCallback)((function(e){l(d.updateProfile({city:e||""}))}),[l]),x=(0,h.useCallback)((function(e){l(d.updateProfile({age:Number(e||0)}))}),[l]),O=(0,h.useCallback)((function(e){l(d.updateProfile({username:e||""}))}),[l]),E=(0,h.useCallback)((function(e){l(d.updateProfile({avatar:e||""}))}),[l]),N=(0,h.useCallback)((function(e){l(d.updateProfile({currency:e}))}),[l]),P=(0,h.useCallback)((function(e){l(d.updateProfile({country:e}))}),[l]);return(0,t.jsx)(G.W,$({reducers:B,removeAfterUnmount:!0},{children:(0,t.jsx)(Q.T,$({className:(0,j.A)("",{},[r])},{children:(0,t.jsxs)(V.g,$({gap:"16",max:!0},{children:[(0,t.jsx)(q,{}),(null==p?void 0:p.length)&&p.map((function(e){return(0,t.jsx)(w.xv,{text:e,theme:w.lg.ERROR},m[e])})),(0,t.jsx)(A,{data:c,isLoading:s,error:f,readonly:v,onChangeFirstname:C,onChangeLastname:b,onChangeCity:R,onChangeAge:x,onChangeUsername:O,onChangeAvatar:E,onChangeCurrency:N,onChangeCountry:P})]}))}))}))}},1150:(e,n,r)=>{r.d(n,{W:()=>l});var a=r(5893),t=r(7294),o=r(9704),l=function(e){var n=e.children,r=e.reducers,l=e.removeAfterUnmount,i=void 0===l||l,c=(0,o.oR)(),u=(0,o.I0)();return(0,t.useEffect)((function(){var e=c.reducerManager.getMountedReducers();return Object.entries(r).forEach((function(n){var r=n[0],a=n[1];e[r]||(c.reducerManager.add(r,a),u({type:"@INIT ".concat(r," reducer")}))})),function(){i&&Object.entries(r).forEach((function(e){var n=e[0];e[1],c.reducerManager.remove(n),u({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,a.jsx)(a.Fragment,{children:n})}},71:(e,n,r)=>{r.d(n,{q:()=>l});var a=r(5893),t=r(7294),o=r(4611),l=function(e){var n=e.className,r=e.src,l=e.size,i=e.alt,c=(0,t.useMemo)((function(){return{width:l||100,height:l||100}}),[l]);return(0,a.jsx)("img",{src:r,alt:i,style:c,className:(0,o.A)("ZqPdwJxd",{},[n])})}},6925:(e,n,r)=>{r.d(n,{I:()=>i});var a=r(5893),t=r(7294),o=r(4611),l=function(){return l=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++)for(var t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},l.apply(this,arguments)},i=(0,t.memo)((function(e){var n=e.className,r=e.value,i=e.onChange,c=e.type,u=void 0===c?"text":c,s=e.placeholder,f=e.autoFocus,d=e.readonly,v=function(e,n){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(a=Object.getOwnPropertySymbols(e);t<a.length;t++)n.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(e,a[t])&&(r[a[t]]=e[a[t]])}return r}(e,["className","value","onChange","type","placeholder","autoFocus","readonly"]),p=(0,t.useState)(!1),h=p[0],y=p[1],g=(0,t.useState)(0),m=g[0],C=g[1],b=(0,t.useRef)(null),R=h&&!d;return(0,t.useEffect)((function(){var e;f&&(y(!0),null===(e=null==b?void 0:b.current)||void 0===e||e.focus())}),[f]),(0,a.jsxs)("div",l({className:(0,o.A)("LuFDUWoP",{},[n])},{children:[s&&(0,a.jsx)("div",l({className:"emAQQ85i"},{children:"".concat(s,">")})),(0,a.jsxs)("div",l({className:"y1GiFC_L"},{children:[(0,a.jsx)("input",l({ref:b,type:u,value:r,onChange:function(e){null==i||i(e.target.value)},className:"LVdIPwcx",onFocus:function(){y(!0)},onBlur:function(){y(!1)},onSelect:function(e){var n;C((null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.selectionStart)||0)},readOnly:d},v)),R&&(0,a.jsx)("span",{className:"lqMFGBuL",style:{left:"".concat(9*m,"px")}})]}))]}))}))},7808:(e,n,r)=>{r.d(n,{P:()=>i});var a=r(5893),t=r(7294),o=r(4611),l=function(){return l=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++)for(var t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},l.apply(this,arguments)},i=function(e){var n=e.className,r=e.label,i=e.options,c=e.value,u=e.onChange,s=e.readonly,f=(0,t.useMemo)((function(){return null==i?void 0:i.map((function(e){return(0,a.jsx)("option",l({className:"JkXz98qY",value:e.value},{children:e.content}),e.value)}))}),[i]);return(0,a.jsxs)("div",l({className:(0,o.A)("cidfdn6H",{},[n])},{children:[r&&(0,a.jsx)("span",l({className:"G1uuf7Bp"},{children:"".concat(r," >")})),(0,a.jsx)("select",l({disabled:s,className:"VOKOuKGo",value:c,onChange:function(e){null==u||u(e.target.value)}},{children:f}))]}))}},2636:(e,n,r)=>{r.d(n,{U:()=>l});var a=r(5893),t=r(5059),o=function(){return o=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++)for(var t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},o.apply(this,arguments)},l=function(e){return(0,a.jsx)(t.k,o({direction:"row"},e))}},314:(e,n,r)=>{r.d(n,{D:()=>d,T:()=>v});var a=r(5893),t=r(4611),o=r(7294),l=r(5461),i=r(6294),c=r(9250),u=r(2276),s=r(9704),f=function(){return f=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++)for(var t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},f.apply(this,arguments)},d="PAGE_ID",v=(0,o.memo)((function(e){var n=e.className,r=e.children,v=e.onScrollEnd,p=(0,o.useRef)(),h=(0,o.useRef)(),y=(0,l.T)(),g=(0,c.TH)().pathname,m=(0,s.v9)((function(e){return(0,i.Qi)(e,g)}));!function(e){var n=e.callback,r=e.wrapperRef,a=e.triggerRef,t=(0,o.useRef)(null);(0,o.useEffect)((function(){var e=r.current,o=a.current;if(n){var l={root:e,rootMargin:"1px",threshold:1};t.current=new IntersectionObserver((function(e){e[0].isIntersecting&&n()}),l),t.current.observe(o)}return function(){t.current&&o&&t.current.unobserve(o)}}),[n,a,r])}({triggerRef:h,wrapperRef:p,callback:v}),(0,u.Q)((function(){p.current.scrollTop=m}));var C,b,R=(C=function(e){y(i.Aw.setScrollPosition({position:e.currentTarget.scrollTop,path:g}))},b=(0,o.useRef)(!1),(0,o.useCallback)((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];b.current||(C.apply(void 0,e),b.current=!0,setTimeout((function(){b.current=!1}),500))}),[C,500]));return(0,a.jsxs)("main",f({ref:p,className:(0,t.A)("a83jDcrK",{},[n]),onScroll:R,id:d},{children:[r,v?(0,a.jsx)("div",{className:"VaPQ__zP",ref:h}):null]}))}))},5461:(e,n,r)=>{r.d(n,{T:()=>t});var a=r(9704),t=function(){return(0,a.I0)()}},2276:(e,n,r)=>{r.d(n,{Q:()=>t});var a=r(7294);function t(e){(0,a.useEffect)((function(){e()}),[])}},1905:(e,n,r)=>{r.d(n,{U:()=>a.U,g:()=>t.g});var a=r(2636),t=r(4882)}}]);